VENV_VERSION=`md5sum ${OPENSHIFT_REPO_DIR}requirements.txt | cut -d ' ' -f1`
VENV_BASE_DIR="${OPENSHIFT_DATA_DIR}virtualenvs/"
VENV_APP_DIR="${VENV_BASE_DIR}${VENV_VERSION}"

source ${VENV_APP_DIR}/bin/activate

# gunicorn config

LOGFILE=${OPENSHIFT_DIY_LOG_DIR}gunicorn_out.log
ACCESS_LOGFILE=${OPENSHIFT_DIY_LOG_DIR}gunicorn_access.log
PIDFILE=${OPENSHIFT_DATA_DIR}gunicorn.pid

# Execute gunicorn daemon

gunicorn $OPENSHIFT_INTERNAL_IP:$OPENSHIFT_INTERNAL_PORT \
    --daemon \
    --pid=$PIDFILE \
    --log-file=$LOGFILE \
    --access-logfile $ACCESS_LOGFILE \
    --log-level=info
